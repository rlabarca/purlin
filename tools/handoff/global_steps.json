{
    "steps": [
        {
            "id": "purlin.handoff.git_clean",
            "friendly_name": "Git Working Directory Clean",
            "description": "No uncommitted changes in the worktree (excluding .purlin/)",
            "code": "git diff --exit-code -- ':!.purlin/' && git diff --cached --exit-code -- ':!.purlin/'",
            "agent_instructions": "Run git status. If any files are staged or modified (outside .purlin/), commit or stash them before proceeding. .purlin/ config files are excluded â€” they are ephemeral in worktrees and must not be committed."
        },
        {
            "id": "purlin.handoff.critic_report",
            "friendly_name": "Critic Report Current",
            "description": "Critic report has been generated recently",
            "code": "${AGENTIC_PYTHON:-python3} -c \"import os,subprocess;r='CRITIC_REPORT.md';exit(0 if os.path.exists(r) and os.path.getmtime(r)>=float(subprocess.check_output(['git','log','-1','--format=%ct']).strip()) else 1)\"",
            "agent_instructions": "Run tools/cdd/status.sh to ensure the Critic report is current. Check CRITIC_REPORT.md for any unresolved action items for your role."
        }
    ]
}
